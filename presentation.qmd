---
format: 
  revealjs:
    slide-number: true
    theme: [default, custom_theme.scss]
    chalkboard:
      buttons: false
    preview-links: auto
    output-file: "index"
    output-ext: "html"
---

```{r}
#| label: setup
#| include: false
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(
  fig.width = 7,
  fig.height = 5,
  fig.align = "center",
  out.width = "100%"
)

if (!require("countdown")) install.packages("countdown")

library(countdown)

if (!require("here")) install.packages("here")

library(here)

include_local_figure <- function(data_source) {
  knitr::include_graphics(
    here::here(
      "materials",
      data_source
    )
  )
}
```

# [Reproducibility in Science]{.bold .r-fit-text} {.title}

Ond≈ôej Mottl

## Research cycle

```{r}
#| label: research cycle
include_local_figure("ResearchCycle.jpg")
```

::: footer
[This image was created by Scriberia for The Turing Way community and is used under a CC-BY licence](https://zenodo.org/doi/10.5281/zenodo.3332807)
:::

## Reproducibility crisis

```{r}
#| label: reprodicibility crisis
include_local_figure("1a.png")
```

::: footer
[Baker, Monya. "1,500 scientists lift the lid on reproducibility." Nature 533, no. 7604 (2016).](https://doi.org/10.1038/533452a)
:::

## Evolution

```{r}
#| label: evolution
include_local_figure("openresearch.jpg")
```

::: footer
[This image was created by Scriberia for The Turing Way community and is used under a CC-BY licence](https://zenodo.org/doi/10.5281/zenodo.3332807)
:::

## [Exercise 1]{.r-fit-text} {.exercise .textcenter}

:::{.r-fit-text}
What is Open Science to You?
:::

`r countdown(minutes = 5)`

# Open Science

```{r}
#| label: open-science
include_local_figure("UNESCO-Open_science-pillars-en.png")
```

::: footer
[UNESCO (2022). Understanding open science ‚Äî Factsheet ‚Äî SC-PBS-STIP/2022/OST/1.](https://doi.org/10.54677/UTCD9302)
:::

## A better view

```{r}
#| label: open-science-taxonomy
include_local_figure("os_taxonomy.png")
```

::: footer
[https://www.fosteropenscience.eu/](https://www.fosteropenscience.eu/)
:::

## The Journey

```{r}
#| label: open-science-journey
include_local_figure("ReproducibleJourney.jpg")
```

::: footer
[This image was created by Scriberia for The Turing Way community and is used under a CC-BY licence](https://zenodo.org/doi/10.5281/zenodo.3332807)
:::

# [DATA]{.bold .r-fit-text} {.title}

## FAIR Principles

Good practices for the management and administration of scientific data

:::: columns
::: {.column width="50%"}

```{r}
#| label: FAIR
include_local_figure("FAIRPrinciples.jpg")
```

:::

::: {.column width="50%"}

::: {.textcenter .bold .text-color-highlight-secondary}
"*Access as open as possible, as closed as necessary*"
:::

::: incremental
* [**F**]{.text-color-highlight-primary}indable 
* [**A**]{.text-color-highlight-primary}ccesible 
* [**I**]{.text-color-highlight-primary}nteroperable 
* [**R**]{.text-color-highlight-primary}eusable
:::

:::
::::

::: footer
[This image was created by Scriberia for The Turing Way community and is used under a CC-BY licence](https://zenodo.org/doi/10.5281/zenodo.3332807)
:::

## Open vs Close

```{r}
#| label: open-vs-close
include_local_figure("open-vs-close-research-with-text.jpg")
```

::: footer
[This image was created by Scriberia for The Turing Way community and is used under a CC-BY licence](https://zenodo.org/doi/10.5281/zenodo.3332807)
:::

## Sharing Data

Do you generate data and/or software?

:::: columns
::: {.column width="50%" .fragment}

```{r}
#| label: DOI
include_local_figure("DOI.jpg")
```

:::

::: {.column width="50%" .incremental}

* Get a permanent URL to the repository as a [**Digital Object Identifier**]{.text-color-highlight-primary} (DOI)
* Deposit them in a "stable" repository (eg. [Zenodo](https://zenodo.org/), [Figshare](https://figshare.com/), etc)
* Included an example of how to cite it in the [**README**]{.text-color-highlight-secondary} or documentation

:::
::::

::: footer
[This image was created by Scriberia for The Turing Way community and is used under a CC-BY licence](https://zenodo.org/doi/10.5281/zenodo.3332807)
:::

## Licensing

[ZENODO]{.text-color-highlight-primary} allows you to choose a licence for your data.

You can always share your private data and [**restricted access**]{.text-color-highlight-secondary} with the correct licence.

There are websites e.g. [https://choosealicense.com/](https://choosealicense.com/) to help on choosing a licence.

```{r}
#| label: licensing
knitr::include_graphics("https://howtofair.dk/media/vkynh5av/examples-of-data-licences.png")
```

::: footer
[How to  FAIR](https://howtofair.dk/how-to-fair/data-licences/)
:::

## Data stewards

```{r}
#| label: DataStewards
include_local_figure("DataStewards.jpg")
```

::: footer
[This image was created by Scriberia for The Turing Way community and is used under a CC-BY licence](https://zenodo.org/doi/10.5281/zenodo.3332807)
:::

# [CODE]{.bold .r-fit-text} {.title}

## Repoducibility ?

:::: columns
::: {.column width="60%"}

```{r}
#| label: meme-work-on-my-machine
knitr::include_graphics("https://media.makeameme.org/created/one-does-not-50b8331726.jpg")
```

:::

::: {.column width="40%" .textcenter}

<br>
<br>

*I was able to reproduce my results on **[my computer/machine]{.text-color-highlight-primary}***

Can I consider my work **[reproducible]{.text-color-highlight-secondary}**?

:::
::::

::: footer
[makeameme.org](https://media.makeameme.org/created/one-does-not-50b8331726)
:::


## Reproducibility

```{r}
#| label: reproducibility
include_local_figure("ReproducibleDefinitionGrid.jpg")
```

::: footer
[This image was created by Scriberia for The Turing Way community and is used under a CC-BY licence](https://zenodo.org/doi/10.5281/zenodo.3332807)
:::

## Time to change

```{r}
#| label: culture-shift
include_local_figure("CultureShift.jpg")
```

::: footer
[This image was created by Scriberia for The Turing Way community and is used under a CC-BY licence](https://zenodo.org/doi/10.5281/zenodo.3332807)
:::

## It is a spectrum

```{r}
#| label: rep-spectrum
knitr::include_graphics("https://raps-with-r.dev/images/repro_spectrum.png")
```

::: footer
[Roger D. Peng ,Reproducible Research in Computational Science.Science334,1226-1227(2011).DOI:10.1126/science.1213847](https://doi.org/10.1126/science.1213847)
:::

## [Exercise 2]{.r-fit-text} {.exercise .textcenter}

:::{.r-fit-text}
How reproducible is your research?

What can you do to improve it?
:::

`r countdown(minutes = 5)`

## It is a spectrum

```{r}
#| label: rep-spectrum-details
knitr::include_graphics("https://www.aalto.fi/sites/g/files/flghsv161/files/styles/o_914w_ah_n_nu/public/2022-02/Glerean_continuum_best_practices1800.png")
```

::: footer
[Getting started with reproducibility in research!](https://www.aalto.fi/en/open-science-and-research/getting-started-with-reproducibility-in-research)
:::

# [PROJECTS]{.bold .r-fit-text} {.title}

## Making a paper (compendium)

:::: columns
::: {.column width="60%"}

```{r}
#| label: compendium
include_local_figure("ResearchCompendium.jpg")
```

:::

::: {.column width="40%" .textcenter}

<br>
<br>

**[Project]{.text-color-highlight-primary}**-oriented structure

Each paper is a single project

:::
::::

::: footer
[This image was created by Scriberia for The Turing Way community and is used under a CC-BY licence](https://zenodo.org/doi/10.5281/zenodo.3332807)
:::

## Project structure

```{r}
#| label: file-management
include_local_figure("file-management-manual-with-text.jpg")
```

::: footer
[This image was created by Scriberia for The Turing Way community and is used under a CC-BY licence](https://zenodo.org/doi/10.5281/zenodo.3332807)
:::

## Project structure - basic {auto-animate="true"}

```{r}
#| eval: false
#| echo: true
# .
# ‚îî‚îÄmy_awesome_project/
#   ‚îú‚îÄ Data/
#   ‚îú‚îÄ Outputs/
#   ‚îú‚îÄ R/
#   ‚îú‚îÄ README.md
#   ‚îú‚îÄ LICENSE
#   ‚îî‚îÄ [project name].Rproj
```

## Project structure - more details {auto-animate="true"}

```{r}
#| eval: false
#| echo: true
# .
# ‚îî‚îÄmy_awesome_project/
#   ‚îú‚îÄ Data/
#   |   ‚îú‚îÄ Input/
#   |   ‚îú‚îÄ Processed/
#   |   ‚îî‚îÄ Temp/
#   ‚îú‚îÄ Outputs/
#   |   ‚îú‚îÄ Data/
#   |   ‚îú‚îÄ Figures/
#   |   ‚îî‚îÄ Tables/
#   ‚îú‚îÄ R/
#   |   ‚îú‚îÄ ___Init_project___.R
#   |   ‚îú‚îÄ 00_Config_file.R
#   |   ‚îú‚îÄ 01_Data_processing/
#   |   ‚îú‚îÄ 02_Main_analyses/
#   |   ‚îú‚îÄ 03_Supplementary_analyses/
#   |   ‚îú‚îÄ Functions/
#   |       ‚îî‚îÄ example_fc.R
#   ‚îú‚îÄ README.md
#   ‚îú‚îÄ LICENSE
#   ‚îî‚îÄ [project name].Rproj
```

## Project structure - Analysis Example {auto-animate="true"}

```{r}
#| eval: false
#| echo: true
# .
# ‚îî‚îÄmy_awesome_project/
#   ‚îú‚îÄ Data/
#   ‚îú‚îÄ Outputs/
#   ‚îú‚îÄ R/
#   |   ‚îú‚îÄ ___Init_project___.R
#   |   ‚îú‚îÄ 00_Config_file.R
#   |   ‚îú‚îÄ 00_Master.R
#   |   ‚îú‚îÄ 01_Data_processing/
#   |   |   ‚îú‚îÄ 01_Prepare_pollen_data.R
#   |   |   ‚îî‚îÄ 01_Download_terrain_data.R
#   |   ‚îú‚îÄ 02_Main_analyses/
#   |   |   ‚îú‚îÄ 01_Vegetation_history/
#   |   |   |   ‚îú‚îÄ 01_Estimate_dissimilarty.R
#   |   |   |   ‚îî‚îÄ 02_Summarise_dissimilarity.R
#   |   |   ‚îú‚îÄ 02_Rate_of_change/
#   |   |   |   ‚îú‚îÄ 01_Roc_estimation.R
#   |   |   |   ‚îú‚îÄ 02_Roc_interpolation.R
#   |   |   ‚îú‚îÄ 03_Temporal_patters_of_groups/
#   |   |   |   ‚îú‚îÄ 01_Define_groups.R
#   |   |   |   ‚îú‚îÄ 02_Temporal_patterns_of_groups.R
#   |   |   ‚îî‚îÄ 04_Visualisation/
#   |   ‚îú‚îÄ 03_Supplementary_analyses/
#   |   ‚îî‚îÄ Functions/
#   ‚îú‚îÄ README.md
#   ‚îú‚îÄ LICENSE
#   ‚îî‚îÄ [project name].Rproj
```

## [Exercise 3]{.r-fit-text} {.exercise .textcenter}

::: {.r-fit-text} 
What are the cons and pros of this approach?
:::

`r countdown(minutes = 3)`

## Project structure - Tools 1

:::: columns
::: {.column width="60%"}
```{r}
#| label: rstudio-project
knitr::include_graphics("https://ecorepsci.github.io/reproducible-science/img/rstudio-project.jpg")
```
:::

::: {.column width="40%" .textcenter}
<br>
<br>

[**R-studio**]{.text-color-highlight-primary} is using [Projects]{.text-color-highlight-secondary} already by default
:::
::::

::: footer
[Reproducible Data Science](https://ecorepsci.github.io/reproducible-science/index.html)
:::

## Project structure - Tools 2

:::: columns
::: {.column width="50%" }
<br>
<br>

[@JennyBryan](https://twitter.com/JennyBryan):

::: {.blockquote}
*If the first line of your R script is*

```{r}
#| label: jenny-quote
#| eval: false
#| echo: true
#| code-line-numbers: false
setwd("C:\Users\jenny\path\that\only\I\have")
```

*I will come into your office and SET YOUR COMPUTER ON FIRE üî•*.
:::
:::

::: {.column width="50%" .fragment}
```{r}
#| label: here-here
include_local_figure("here_pkg.png")
```

The [{here} package](https://here.r-lib.org/) is up for rescue! 
:::
::::

::: footer
Artwork by [@allison_horst](https://twitter.com/allison_horst)
:::

## Clean code

:::: columns
::: {.column width="50%" }
```{r}
#| label: ReadableCode
include_local_figure("ReadableCode.jpg")
```
:::

::: {.column width="50%" .fragment}

```{r}
#| label: wtf-per-minute
knitr::include_graphics("https://www.gilesd-j.com/wp-content/uploads/2023/01/image-1.png")
```

:::
::::

::: footer
[This image was created by Scriberia for The Turing Way community and is used under a CC-BY licence](https://zenodo.org/doi/10.5281/zenodo.3332807)

[Glen Lipka](https://commadot.com/)
:::

## Code style and etiquette 

:::: {.columns}

::: {.column width="50%"}

Create a [Code Convention]{.text-color-highlight-primary} to keep the code: 

::: {.incremental}
* [**readable**]{.text-color-highlight-secondary}
* [**understandable**]{.text-color-highlight-secondary}
* [**maintainable**]{.text-color-highlight-secondary}
:::

::: {.fragment}
Allow for [**collaboration**]{.text-color-highlight-terciary} and [**reproducibility**]{.text-color-highlight-terciary}
:::

::: {.fragment}
* Example of [my personal code conventions](https://ondrejmottl.github.io/collaboration/code_convention.html)
:::
:::

::: {.column width="50%"}

```{r}
#| label: code-convention-meme
include_local_figure("meme-code-convention.jpg")
```
:::

::::

::: footer
[Reddit - Naming things is hard](https://www.reddit.com/r/ProgrammerHumor/comments/dwmwvj/naming_things_is_hard/)
:::

## Code style and etiquette 

:::: columns
::: {.column width="40%"}

[Code Convention]{.text-color-highlight-secondary}:

::: {.incremental}
* Script Structure
* Naming things
* Script annotation
:::

:::

::: {.column width="60%"}
:::
::::


## Code style and etiquette 

:::: columns
::: {.column width="40%"}

[Code Convention]{.text-color-highlight-secondary}:

* **[Script Structure]{.text-color-highlight-primary}**
* Naming things
* Script annotation

:::

::: {.column width="60%" .fragment .textcenter}

[One script = one task]{.text-color-highlight-terciary}

```{r}
#| label: Script Structure
#| eval: false
#| echo: true
#| code-line-numbers: false
#----------------------------------------------------------#
#
#
#                     Project name 
#
#                      Script name
#                      - continue
#
#                       Authors 
#                        Year
#
#----------------------------------------------------------#

# General description of the script

#----------------------------------------------------------#
# 1. Load data -----
#----------------------------------------------------------#

#----------------------------------------------------------#
# 2. Data wrangling -----
#----------------------------------------------------------#

#--------------------------------------------------#
# 2.1. Fit model -----
#--------------------------------------------------#

#----------------------------------------------------------#
# 3. Save results -----
#----------------------------------------------------------#

```
:::
::::

## Code style and etiquette 

:::: columns
::: {.column width="40%" }

[Code Convention]{.text-color-highlight-secondary}:

* *Script Structure*
* **[Naming things]{.text-color-highlight-primary}**
* Script annotation

:::

::: {.column width="60%"}

::: {.blockquote}
*There are only two hard things in Computer Science: cache invalidation and naming things.*
:::
Phil Karlton

:::
::::

## Code style and etiquette 

:::: columns
::: {.column width="40%" }

[Code Convention]{.text-color-highlight-secondary}:

* *Script Structure*
* **[Naming things]{.text-color-highlight-primary}**
* Script annotation

:::

::: {.column width="60%" .textcenter} 
```{r}
#| label: case
include_local_figure("case.png")
```

Do not use "."(dot) in the object names!

:::
::::

::: footer
Artwork by [@allison_horst](https://twitter.com/allison_horst)
:::

## Code style and etiquette 

:::: columns
::: {.column width="40%" }

[Code Convention]{.text-color-highlight-secondary}:

* *Script Structure*
* Naming things
* **[Script annotation]{.text-color-highlight-primary}**

:::

::: {.column width="60%"}

```{r}
#| label: code-comments
knitr::include_graphics("https://i.imgur.com/H4uaq47.jpeg")
```

:::
::::

::: footer
[r/ProgrammerHumor](https://www.reddit.com/r/ProgrammerHumor/comments/aatfvz/functional_programming_in_a_nutshell/)
:::

## Exercise 4 {.exercise}

`r countdown(minutes = 5)`

::::: {.panel-tabset}

### Ex1

:::: columns
::: {.column width="55%"}

```{r}
#| label: style ex1
#| eval: false
#| echo: true
#| code-line-numdbers: true
x = 23; y = 12

84->childHeight 

number_of_days_since_last_accident_floor_4_lab_23 = 0
```
:::

::: {.column width="45%" .fragment}
```{r}
#| label: style ex1 - solution
#| eval: false
#| echo: true
#| code-line-numbers: true
x <- 23
y <- 12

child_height_cm <- 84

days_since_last_accident <- 0
```
:::
::::

### Ex2 

:::: columns
::: {.column width="40%"}

```{r}
#| label: style ex2
#| eval: false
#| echo: true
#| code-line-numdbers: true
Day.One = 29.07.2024

f*12+i->h

c.m(List-Test)$`col A`
```
:::

::: {.column width="60%" .fragment}
```{r}
#| label: style ex2 - solution
#| eval: false
#| echo: true
#| code-line-numbers: true
day_one <- "2024-07-29"

height <-
  (feet * 12) + inches

list_test %>%
  calculate_mean() %>%
  purrr::chuck("column_a")
```
:::
::::

### Ex3

:::: columns
::: {.column width="30%"}

```{r}
#| label: style ex3
#| eval: false
#| echo: true
#| code-line-numbers: true
function(a,
b,c,d=100) 
{
if(a<c) a<-(a/b)*d
a 
} -> std.con  
```
:::

::: {.column width="70%" .fragment}
```{r}
#| label: style ex3 - solution
#| eval: false
#| echo: true
#| code-line-numbers: true
get_standart_concentration <- function(concentration = NULL,
                                       order_magnitude = NULL,
                                       expected_concentration = NULL,
                                       number_of_iterations = 100) {
  if (
    isTRUE(concentration < expected_concentration)
  ) {
    res <-
      (concentration / order_magnitude) * number_of_iterations
  }
  return(res)
}
```
:::
::::

:::::

## 

:::{.textcenter .r-fit-text}
‚ÄºÔ∏è BE [CONSISTENT]{.text-color-highlight-primary .bold} ‚ÄºÔ∏è
:::

#### Resources 
* [The {tidyverse} style guide](https://style.tidyverse.org/index.html)
* [Google‚Äôs R Style Guide](https://google.github.io/styleguide/Rguide.html)
* [Dealing with the Second Hardest Thing in Computer Science](https://indrajeetpatil.github.io/second-hardest-cs-thing/)
  * Presentation by [Indrajeet Patil](https://sites.google.com/site/indrajeetspatilmorality/)
* [Naming Things in Code](https://youtu.be/-J3wNP6u5YU)
  * YT video by [CodeAesthetic](https://www.youtube.com/@CodeAesthetic) 


## Self-containedness

:::: columns
::: {.column width="50%" }

<br>
<br>

Will [my code]{.text-color-highlight-primary} run on [your]{.text-color-highlight-secondary} machine?

Will [my code]{.text-color-highlight-primary} run [in 10 years]{.text-color-highlight-terciary}?

:::

::: {.column width="50%" .fragment .textcenter}
```{r}
#| label: renv
include_local_figure("renv.png")
```

The [{revn} package](https://rstudio.github.io/renv/index.html) will make sure it will! 

:::
::::

::: footer
Artwork by [@allison_horst](https://twitter.com/allison_horst)
:::

## Self-containedness - advanced

What if we share the [whole Operating System]{.text-color-highlight-primary} as well?

:::: columns
::: {.column width="40%" }

```{r}
#| label: docker_logo
include_local_figure("docker_logo.png")
```

:::

::: {.column width="60%"}

```{r}
#| label: docker_scheme
knitr::include_graphics("https://www.statworx.com/wp-content/uploads/2019/02/Blog_R-script-in-docker_docker-run-1024x629.png")
```

:::
::::

::: footer
Icon by [icon-icons.com](https://icon-icons.com/icon/docker-official-logo/169250); artwork by [@statworx](https://www.statworx.com/en/)
:::

## All in code

```{r}
#| label: code-all-meme
knitr::include_graphics("https://guangchuangyu.github.io/blog_images/R/meme/Figs/unnamed-chunk-2-1.png")
```

::: footer
[create meme in R](https://guangchuangyu.github.io/2017/10/create-meme-in-r/)
:::

## All in code

:::: columns
::: {.column width="50%" }

```{r}
#| label: tidyverse
knitr::include_graphics("https://science.uct.ac.za/sites/default/files/content_migration/science_uct_ac_za/708/images/tidy_workflow.png")
```

:::

::: {.column width="50%"}

[Do not edit raw data!]{.bold .text-color-highlight-primary}

* `Data/Input/Raw/`
* Data wrangling in code
* Save proceesed data (`Data/Processed/`)
* [{tidyverse}](https://www.tidyverse.org/) for data manipulation

:::
::::

::: footer
[Centre for Statistics in Ecology, the Environment and Conservation (SEEC)](https://science.uct.ac.za/seec)
:::

# [Version control]{.bold .r-fit-text} {.title}

## Ring a bell ?

```{r}
#| label: final-final
knitr::include_graphics("https://biostats-r.github.io/biostats/github/Pics/gittutorial/phd101212s.gif")
```

## What is Version Control? ü§î

```{r}
#| label: VersionControl
include_local_figure("VersionControl.jpg")
```

::: {.textcenter}
It is all about [keeping track]{.text-color-highlight-primary} of [changes]{.text-color-highlight-secondary} üìì‚úçÔ∏è
:::

::: footer
[This image was created by Scriberia for The Turing Way community and is used under a CC-BY licence](https://zenodo.org/doi/10.5281/zenodo.3332807)
:::

## Exercise 5 {.exercise .textcenter} 

`r countdown(minutes = 3)`

:::: columns

::: {.column width="50%"}

### Do you recognize some of these questions?

* *It broke ‚Ä¶ hopefully I have a working version somewhere?*
* *Can you please send me the latest version?*
* *Which version are you using?*
* *Found a bug! Since when was it there?*
* *I am sure it used to work. When did it change?*
* *My laptop is gone. Is my thesis now gone?*

:::

::: {.column width="50%" }

### How do you keep track of changes?

```{r}
#| label: version-nightmare
knitr::include_graphics("https://ecorepsci.github.io/reproducible-science/img/version-nightmare.png")
```

:::

::::

::: footer
[Reproducible Data Science](https://ecorepsci.github.io/reproducible-science/index.html)
:::

##

:::: columns

::: {.column width="45%"}

### Git {.textcenter}

* local software
* keep track of changes of files 

<br>

```{r}
#| label: git-logo
#| fig-width: 1
#| fig-height: 1 
knitr::include_graphics("https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/Git_icon.svg/768px-Git_icon.svg.png")
```

:::

::: {.column width="10%" }
:::

::: {.column width="45%" }

### GitHub {.textcenter}

* host server
* store (git) the data
* project management, collaboration, publishing

```{r}
#| label: github-logo
knitr::include_graphics("https://upload.wikimedia.org/wikipedia/commons/thumb/a/ae/Github-desktop-logo-symbol.svg/768px-Github-desktop-logo-symbol.svg.png")
```

:::

::::

## a commit

A [**commit**]{.text-color-highlight-primary} is a [record]{.text-color-highlight-secondary } of a change

If you create or edit a file in your repository and save the changes, you need to [record]{.text-color-highlight-secondary} your change via a [**commit**]{.text-color-highlight-primary}

::::: {.fragment}

### Chess analogy? 

:::: columns

::: {.column width="45%"}

```{r}
#| label: chess
knitr::include_graphics("https://www.wikihow.com/images/thumb/0/06/Play-Chess-Step-28-Version-5.jpg/aid54279-v4-728px-Play-Chess-Step-28-Version-5.jpg")
```

:::

::: {.column width="45%" }

**Chess move diary**:

* Bc4 (Bishop to c4)
* Nf3 (Knight to f3)
* Qc7 (Queen to c7)

:::

::::

:::::

::: footer
[wikiHow: How to Play Chess?](https://www.wikihow.com/Play-Chess)
:::

## a commit

:::: columns
::: {.column width="45%" .textcenter} 
```{r}
#| label: git1-chess
knitr::include_graphics("https://www.wikihow.com/images/thumb/c/c3/Play-Chess-Step-24-Version-5.jpg/aid54279-v4-728px-Play-Chess-Step-24-Version-5.jpg")
```

*Pawn to d4*
:::

::: {.column width="45%" .textcenter .fragment}
```{r}
#| label: git01
include_local_figure("git01.png")
```

*Edit line 32 of file A*
:::
::::

::: footer
[wikiHow: How to Play Chess?](https://www.wikihow.com/Play-Chess)
:::

## a commit

<br>
<br>

```{r}
#| label: git02
include_local_figure("git02.png")
```

## Git/GitHub setup AKA "git hell"

:::: columns



::: {.column width="45%"}

<br>

::: {.blockquote}
*Brace yourself for some pain*
:::

:::

::: {.column width="45%"}
```{r}
#| label: ErrorManagement
include_local_figure("ErrorManagement.jpg")
```
:::

::::

### Resources

* [Happy Git and GitHub for the useR](https://happygitwithr.com/install-intro)
* [biostats: Version control with GitHub and RStudio](https://biostats-r.github.io/biostats/github/1_Git_Tutorial.html)
* [Building RAP with R: Version control with Git](https://raps-with-r.dev/git.html)
* [{usethis} tutorial](https://usethis.r-lib.org/articles/usethis-setup.html#install-git)
* ... and many others

## Basic vocabulary

:::: columns

::: {.column width="40%" .incremental}

 * [R script]{.text-color-highlight-primary} is a record of code.
 * [R Project]{.text-color-highlight-primary} is self contained project/study/paper containg R scripts, data, figures, etc..
 * Every such project is called [repository]{.text-color-highlight-secondary} (ie a *repo*) 
 * Your **local** repository is called [local]{.text-color-highlight-terciary}
 * Your **online** repository, is called [remote]{.text-color-highlight-terciary}

:::

:::{.column width="60%" .fragment}
```{r}
#| label: local-remote
knitr::include_graphics("https://user.oc-static.com/upload/2022/01/04/16412576933806_image30.png")
```
:::

::::

::: footer
[https://openclassrooms.com/](https://openclassrooms.com/en/courses/7476131-manage-your-code-project-with-git-and-github/7681891-work-in-your-local-git-repository)
::: 

## Git init (project first)

Activate [git]{.text-color-highlight-primary} for a repo 

::::: {.panel-tabset}

### RStudio

For existing project

```{r}
#| label: git-init-rstudio
#| echo: true
#| eval: false
#| code-line-numbers: false
usethis::use_git()
```

Create new project with git tracking

```{r}
#| label: git-init-rstudio-new
#| echo: true
#| eval: false
#| code-line-numbers: false
usethis::create_project("<DIRECTORY>")
# switch to the new project
usethis::use_git()
```


### Command line

For existing project

```{bash}
#| label: git-init-cl
#| echo: true
#| eval: false
#| code-line-numbers: false
git init
```

Create new project with git tracking

```{bash}
#| label: git-init-cl-new
#| echo: true
#| eval: false
#| code-line-numbers: false
git init <DIRECTORY>
```

### VS Code

Git integration is automatic in [Source control]{.text-color-highlight-secondary} panel

```{r}
#| label: git-init-vscode
knitr::include_graphics("https://www.sqlshack.com/wp-content/uploads/2020/07/visual-studio-code-and-git-source-control.png")
```

### GH Desktop

:::: columns

::: {.column width="60%"}

For existing project

```{r}
#| label: git-init-GH
knitr::include_graphics("https://docs.github.com/assets/cb-10757/mw-1440/images/help/desktop/add-local-repository-windows.webp")
```

:::

::: {.column width="40%"}

Create new project with git tracking

```{r}
#| label: git-init-GH-new
knitr::include_graphics("https://docs.github.com/assets/cb-143755/mw-1440/images/help/desktop/lets-get-started.webp")
```

:::

::::

:::::

::: footer
[SQLShack](https://www.sqlshack.com/visual-studio-code-vs-code-integration-with-git-source-control/)
:::

## Git clone (repo first)

Copy (download) for  [remote repo]{.text-color-highlight-primary} to [local]{.text-color-highlight-secondary} machine

::::: {.panel-tabset}

### RStudio

```{r}
#| label: git-clone-rstudio
#| echo: true
#| eval: false
#| code-line-numbers: false
usethis::create_from_github(
  repo_spec = "https://github.com/<OWNER>/<REPO>.git",
  destdir = "<DIRECTORY>",
  fork = FALSE
  )
```

### Command line

```{bash}
#| label: git-colne-cl
#| echo: true
#| eval: false
#| code-line-numbers: false
git clone https://github.com/<OWNER>/<REPO>.git <DIRECTORY>
```

### VS Code

Open [Command Palette]{.text-color-highlight-secondary} (`Ctrl+Shift+p`)

Paste in URL: `"https://github.com/<OWNER>/<REPO>.git"`

### GH Desktop

```{r}
#| label: git-clone-GH
knitr::include_graphics("https://docs.github.com/assets/cb-10969/mw-1440/images/help/desktop/clone-file-menu-windows.webp")
```

:::::

## 3 states of a file 

<br>

:::: columns
::: {.column width="40%"}
```{r}
#| label: git-stage-scheme
knitr::include_graphics("https://git-scm.com/images/about/index1@2x.png")
```
:::

::: {.column width="60%" .fragment}
```{r}
#| label: git-stage-draw
knitr::include_graphics("https://i0.wp.com/jessitron.com/wp-content/uploads/2012/12/27eb8-screenshot2012-12-09at2.07.55pm.png")
```
:::
::::

::: footer
[git---everything-is-local](https://git-scm.com/)

[jessitron](https://jessitron.com/2012/12/09/git-the-many-parts-five-categories-of-files/)
:::

## Staging changes

Make a change to a file and save it. Now *stage* the change:

::::: {.panel-tabset}

### RStudio

:::: columns
::: {.column width="45%"}

```{r}
#| label: git-stage-rstudio
knitr::include_graphics("https://annakrystalli.me/talks/assets/git_tab.png")
```

:::

::: {.column width="45%"}

* two yellow `??` indicates adding a file 
* a blue `M` indicates edit a file that has already been committed
* a red `D` indicates deleting a file

:::

::::

### Command line

```{bash}
#| label: git-stage-cl
#| echo: true
#| eval: false
#| code-line-numbers: false
git add <FILE>
```

### VS Code

:::: columns

::: {.column width="20%"}
:::


::: {.column width="60%"}

```{r}
#| label: git-stage-VScode
knitr::include_graphics("https://code.visualstudio.com/assets/docs/sourcecontrol/overview/stage-changes.png")
```

:::

::: {.column width="20%"}
:::

::::

### GH Desktop

:::: columns
::: {.column width="45%"}

```{r}
#| label: git-stage-GH
knitr::include_graphics("https://docs.github.com/assets/cb-16555/mw-1440/images/help/desktop/commit-all.webp")
```

:::

::: {.column width="45%"}

* The red icon indicates removed files.
* The yellow icon indicates modified files.
* The green icon indicates added files.
:::

::::

:::::

## a first commit

Commit (record) *staged* changes:

::::: {.panel-tabset}

### RStudio

```{r}
#| label: git-commit-rstudio
knitr::include_graphics("https://biostats-r.github.io/biostats/github/Pics/gittutorial/19_commit_window.png")
```

### Command line

```{bash}
#| label: git-commit-cl
#| echo: true
#| eval: false
#| code-line-numbers: false
git commit -am "commit message"
```

### VS Code

```{r}
#| label: git-commit-vscode
knitr::include_graphics("https://code.visualstudio.com/assets/docs/sourcecontrol/intro/scm-staging.png")
```

### GH Desktop

:::: columns

::: {.column width="20%"}
:::

::: {.column width="60%"}
```{r}
#| label: git-commit-gh
knitr::include_graphics("https://user-images.githubusercontent.com/359239/43204294-df0e02b8-8ff6-11e8-9a6d-e1ceb6e460e2.png")
```
:::

::: {.column width="20%"}
:::

::::

:::::

## Dissection of a commit

:::: columns

:::{.column width="60%"}
```{bash}
#| label: git-commit-dissection
#| echo: true
#| eval: false
#| code-line-numbers: true
$ git log --stat
commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7
Author: Scott Chacon <schacon@gee-mail.com>
Date:   Sat Mar 15 16:40:33 2008 -0700

    Remove unnecessary test

 lib/simplegit.rb | 5 -----
 1 file changed, 5 deletions(-)

commit a11bef06a3f659402fe7563abf99ad00de2209e6
Author: Scott Chacon <schacon@gee-mail.com>
Date:   Sat Mar 15 10:31:28 2008 -0700

    Initial commit

 README           |  6 ++++++
 Rakefile         | 23 +++++++++++++++++++++++
 lib/simplegit.rb | 25 +++++++++++++++++++++++++
 3 files changed, 54 insertions(+)
```
:::

:::{.column width="40%"}

**SHA** - unique identifier

**Author** - who has done this?

**Date** - when was this done?

**Message** - description of what has been done

**Stats** - what has changed?

:::

::::

## Commit message

Commits are **quick** and **cheap**. Therefore:

1. commit [**often** (!)]{.text-color-highlight-primary} 
2. provide [**useful**]{.text-color-highlight-secondary} commit messages.

:::: columns

::: {.column width="20%"}
:::

::: {.column width="60%" .fragment}
```{r}
#| label: commit-message
knitr::include_graphics("https://biostats-r.github.io/biostats/github/Pics/gittutorial/20_git_commit.png")
```
:::

::: {.column width="20%"}
:::

::::

## Commit history

```{r}
#| label: commit-history
knitr::include_graphics("https://happygitwithr.com/img/commit-diff-sha-tag.png")
```

::: footer
[Happy Git and GitHub for the useR](https://happygitwithr.com/install-intro)
:::

## [Exercise 6]{.r-fit-text} {.exercise .textcenter}

::: {.r-fit-text} 
Clone a repo, commit some changes, review history
:::

`r countdown(minutes = 3)`

## remote

```{r}
#| label: git-remote
knitr::include_graphics("https://biostats-r.github.io/biostats/github/Pics/gittutorial/0_workflow_git.png")
```

::: footer
[biostats: Version control with GitHub and RStudio](https://biostats-r.github.io/biostats/github/1_Git_Tutorial.html)
:::

## remote

Now we need to *sync* chnages with the [remote]{.text-color-highlight-primary} using [**PUSH**]{.text-color-highlight-secondary}


::::: {.panel-tabset}

### RStudio

Add a remote to existing local repo (only once):

```{r}
#| label: git-mk-remote-rstudio
#| echo: true
#| eval: false
#| code-line-numbers: false
usethis::use_github(protocol  = "https")
```

Push local to remote (GitHub):

```{r}
#| label: git-push-rstudio
knitr::include_graphics("https://biostats-r.github.io/biostats/github/Pics/gittutorial/21_push.png")
```

### Command line

Add a remote to existing local repo (only once):

```{bash}
#| label: git-mk-remote-cl
#| echo: true
#| eval: false
#| code-line-numbers: false
git remote add origin https://github.com/<OWNER>/<REPO>
```

Push local to remote (GitHub):

```{bash}
#| label: git-push-cl
#| echo: true
#| eval: false
#| code-line-numbers: false
git push
```

### VS Code

:::: columns
::: {.column width="60%"}
Add a remote to existing local repo (only once):
```{r}
#| label: git-mk-remotze-vscode
knitr::include_graphics("https://code.visualstudio.com/assets/docs/sourcecontrol/intro/remote-repo.png")
```
:::

::: {.column width="40%"}
Push local to remote (GitHub):
```{r}
#| label: git-push-vscode
knitr::include_graphics("https://code.visualstudio.com/assets/docs/sourcecontrol/intro/sync.png")
```
:::
::::

### GH Desktop

:::: columns
::: {.column width="50%"}
Add a remote to existing local repo (only once):
```{r}
#| label: git--mk-remote-GH
knitr::include_graphics("https://docs.github.com/assets/cb-54091/mw-1440/images/help/desktop/publish-repository.webp")
```
:::

::: {.column width="50%"}
Push local to remote (GitHub):
```{r}
#| label: git-push-GH
knitr::include_graphics("https://docs.github.com/assets/cb-17787/mw-1440/images/help/desktop/push-to-origin.webp")
```
:::
::::

:::::

## [GitHub intermezzo]{.r-fit-text} {.inverse .textcenter}

## A GitHub repo

```{r}
#| label: github-intermezzo
knitr::include_graphics("https://biostats-r.github.io/biostats/github/Pics/gittutorial/10_new_repo.png")
```

::: footer
[biostats: Version control with GitHub and RStudio](https://biostats-r.github.io/biostats/github/1_Git_Tutorial.html)
:::

## GitHub creating a repo

```{r}
#| label: gh-mk-repo-new
include_local_figure("01_new_button.png")
```

::: footer
[biostats: Version control with GitHub and RStudio](https://biostats-r.github.io/biostats/github/1_Git_Tutorial.html)
:::

## GitHub creating a repo

```{r}
#| label: gh-mk-repo-owner
include_local_figure("03_owner.png")
```

::: footer
[biostats: Version control with GitHub and RStudio](https://biostats-r.github.io/biostats/github/1_Git_Tutorial.html)
:::

## GitHub creating a repo

```{r}
#| label: gh-mk-repo-name
include_local_figure("04_name.png")
```

::: footer
[biostats: Version control with GitHub and RStudio](https://biostats-r.github.io/biostats/github/1_Git_Tutorial.html)
:::

## GitHub creating a repo

```{r}
#| label: gh-mk-repo-visibility
include_local_figure("05_visibility.png")
```

::: footer
[biostats: Version control with GitHub and RStudio](https://biostats-r.github.io/biostats/github/1_Git_Tutorial.html)
:::

## GitHub creating a repo

**README** - description of the project

**.gitignore** - list of files ignored by GitHub (more about it later)

**license** - tell other what they can do wit your code

```{r}
#| label: gh-mk-repo-readme
include_local_figure("06_readme.png")
```

::: footer
[biostats: Version control with GitHub and RStudio](https://biostats-r.github.io/biostats/github/1_Git_Tutorial.html)
:::

## A note on {usethis}

[{usethis} package](https://usethis.r-lib.org/index.html) provide a lot of usefull helpers

* **README** - description of the project

```{r}
#| label: usethis-readme
#| echo: true
#| eval: false
#| code-line-numbers: false
usethis::use_readme_md()
```

* **LICENSE** - restict the use of your code

```{r}
#| label: usethis-licence
#| echo: true
#| eval: false
#| code-line-numbers: false
usethis::use_mit_license(name = "Ond≈ôej Mottl")
```

* **CONTRIBUTING.md** - guidelines for contributors

```{r}
#| label: usethis-contributing
#| echo: true
#| eval: false
#| code-line-numbers: false
usethis::use_tidy_contributing()
```

* **CODE_OF_CONDUCT.md** - set the tone for discourse between contributors

```{r}
#| label: usethis-code-of-conduct
#| echo: true
#| eval: false
#| code-line-numbers: false
usethis::use_code_of_conduct()
```

## GitHub creating a repo

```{r}
#| label: gh-mk-repo-final
include_local_figure("07_final_click.png")
```

::: footer
[biostats: Version control with GitHub and RStudio](https://biostats-r.github.io/biostats/github/1_Git_Tutorial.html)
:::

## `.gitignore` file

A guide to the [git]{.text-color-highlight-primary} which files [**should be ignored for detecting changes**]{.text-color-highlight-secondary}

Here is an example of a **.gitignore** file:
```{bash}
#| label: gitignore
#| echo: true
#| eval: false
#| code-line-numbers: true
# History files
.Rhistory
.Rapp.history

# Session Data files
.RData

# RStudio files
.Rproj.user/

# OAuth2 token, see https://github.com/hadley/httr/releases/tag/v0.3
.httr-oauth
.Rproj.user

#data (excludes everything in the folder data)
data/*

# you can make exceptions for specific files
!data/dragon_taxonomy.csv

#figures & output (excludes all figure files)
*.png
*.pdf
*.jpeg
```

## update local- PULL 

```{r}
#| label: git-many-clones
knitr::include_graphics("https://sfdctechie.wordpress.com/wp-content/uploads/2019/12/github.png")
```

::: footer
[sfdc techie ‚Äì Pavan's blog](https://sfdctechie.wordpress.com/2019/12/27/how-to-add-a-salesforce-dx-project-to-source-control-step-by-step-guide/)
:::

## update local- PULL 

```{r}
#| label: git-pull
knitr::include_graphics("https://biostats-r.github.io/biostats/github/Pics/gittutorial/22_workflow2.png")
```

::: footer
[biostats: Version control with GitHub and RStudio](https://biostats-r.github.io/biostats/github/1_Git_Tutorial.html)
:::

## update local- PULL 

Now we need to *sync* chnages from the [remote]{.text-color-highlight-secondary} to [local]{.text-color-highlight-terciary} the using [**PULL**]{.text-color-highlight-primary}

::::: {.panel-tabset}

### RStudio

:::: columns
::: {.column width="10%"}
:::

::: {.column width="70%"}
Pull from remote (GitHub) to local
```{r}
#| label: git-pull-rstudio
knitr::include_graphics("https://annakrystalli.me/talks/assets/git_tab.png")
```
:::
::::

### Command line

Pull from remote (GitHub) to local:

```{bash}
#| label: git-pull-cl
#| echo: true
#| eval: false
#| code-line-numbers: false
git pull
```

### VS Code

:::: columns
::: {.column width="10%"}
:::

::: {.column width="70%"}
Pull from remote (GitHub) to local
```{r}
#| label: git-pull-vscode
include_local_figure("vscode_sync.png")
```
:::
::::

### GH Desktop

:::: columns
::: {.column width="10%"}
:::

::: {.column width="70%"}
Pull from remote (GitHub) to local
```{r}
#| label: git-pull-GH
knitr::include_graphics("https://docs.github.com/assets/cb-24440/mw-1440/images/help/desktop/pull-button.webp")
```
:::
::::

:::::

## Merge conflict üí©üí©üí©

```{r}
#| label: git-merge-conflict-vis
knitr::include_graphics("https://www.simplilearn.com/ice9/free_resources_article_thumb/pull-push.JPG")
```

A [merge conflict]{.text-color-highlight-primary} can occur when you are changing the [same line]{.text-color-highlight-secondary} in one file [differently](.text-color-highlight-terciary).

:::footer
[https://www.simplilearn.com/](https://www.simplilearn.com/tutorials/git-tutorial/merge-conflicts-in-git)
:::

## Merge conflict üí©üí©üí©

<br>

```{bash}
#| label: git-merge-conflict
#| echo: true
#| eval: false
#| code-line-numbers: false
To https://github.com/picardis/myrepo.git
 ! [rejected]        master -> master (fetch first)
error: failed to push some refs to 'https://github.com/picardis/myrepo.git'
hint: Updates were rejected because the remote contains work that you do
hint: not have locally. This is usually caused by another repository pushing
hint: to the same ref. You may want to first integrate the remote changes
hint: (e.g., 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.
```

:::: columns

::: {.column width="50%" .fragment}
a good strategy to avoid such conflicts: 

* Commit often
* Work in small steps
* Push and pull regularly
* Organize your code in small modules (scripts)
:::

::: {.column width="50%" .fragment}
<br>

Merge conflicts cannot always be avoided (but can be mitigated by *branches*; later).
:::
::::

## Merge conflict üí©üí©üí©

```{bash}
#| label: git-merge-conflict-example
#| echo: true
#| eval: false
#| code-line-numbers: false
If you have questions, please
<<<<< HEAD
open an issue
=======
ask your question in IRC.
>>>>> branch-a
```

::: {.fragment}

Delete the unwanted text (including the *decorations*)

```{bash}
#| label: git-merge-conflict-example-solution
#| echo: true
#| eval: false
#| code-line-numbers: false
If you have questions, please
ask your question in IRC.
```

Then **save the file**, **stage**, and **commit** again 

:::

## [Exercise 6]{.r-fit-text} {.exercise .textcenter}

:::{.r-fit-text}
Create a merge conflict and fix it
:::

`r countdown(minutes = 5)`

## Ups! I have made a mistake üòÆ

How to undo last commit?

[Variant A]{.text-color-highlight-primary}: I commited but **NOT** [pushed yet]{.text-color-highlight-terciary}.

::::: {.panel-tabset}

### RStudio

RStudio has a range of possibilities to work with Git and GitHub as shown in this tutorial. The **Terminal** (NOT *console*) has more commands and options and will be handy for trouble shooting.

```{bash}
#| label: git-undo-commit-rstudio
#| echo: true
#| eval: false
#| code-line-numbers: false
git reset --soft HEAD@{1}
```

### Command line

```{bash}
#| label: git-undo-commit-cl
#| echo: true
#| eval: false
#| code-line-numbers: false
git reset --soft HEAD@{1}
```

### VS Code

Open [Command Palette]{.text-color-highlight-secondary} (`Ctrl+Shift+p`)

Write [Git: Undo Last Commit]{.text-color-highlight-terciary}

### GH Desktop

:::: columns
:::{.column width="10%"}
:::

:::{.column width="70%"}
```{r}
#| label: git-undo-commit-GH
knitr::include_graphics("https://docs.github.com/assets/cb-12506/mw-1440/images/help/desktop/undo-commit.webp")
```
:::
::::

:::::

## Ups! I have made a mistake üòÆ

How to undo last commit?

[Variant B]{.text-color-highlight-secondary}: I commited but **AND** [pushed already]{.text-color-highlight-terciary}.

::::: {.panel-tabset}

### RStudio

We need the **Terminal** (NOT *console*) again.

Copy the **SHA** of the last commit

```{bash}
#| label: git-reset-commit-rstudio
#| echo: true
#| eval: false
#| code-line-numbers: false
git reset --hard <SHA>
```

### Command line

Copy the **SHA** of the last commit

```{bash}
#| label: git-reset-commit-cl
#| echo: true
#| eval: false
#| code-line-numbers: false
git reset --hard <SHA>
```

### VS Code

In the [Source control]{.text-color-highlight-secondary} panel -> **COMMITS** section -> Right-click on the commit you want to revert to -> Select the [Reset Current Branch to Previous Commit]{.text-color-highlight-terciary}

:::: columns
:::{.column width="10%"}
:::

:::{.column width="60%"}
```{r}
#| label: git-reset-commit-VScode
knitr::include_graphics("https://www.gitkraken.com/wp-content/uploads/2022/03/gitlens-revert-commit-sidebar-1.png")
```
:::
::::

### GH Desktop

Right-click on the commit you would like to revert to and select [Reset to commit]{.text-color-highlight-terciary}.

:::: columns
:::{.column width="10%"}
:::

:::{.column width="70%"}
```{r}
#| label: git-reset-commit-GH
knitr::include_graphics("https://docs.github.com/assets/cb-130280/mw-1440/images/help/desktop/history-tab-in-commit-sidebar.webp")
```
:::
::::

:::::

## [Branches]{.r-fit-text} {.inverse .textcenter}

## Branches

```{r}
#| label: git-branches
knitr::include_graphics("https://miro.medium.com/v2/resize:fit:640/format:webp/1*T4HW6dnJQQz2c2soc4AeFQ.png")
```

:::footer
[Git For Dummies](https://nicholas0010.medium.com/git-for-dummies-2-2-2874e625bf65)
:::

## Branches

```{r}
#| label: git-branches-funny
knitr::include_graphics("https://coderefinery.github.io/git-intro/_images/gophers.png")
```

:::footer
[coderefinery](https://coderefinery.github.io/git-intro/commits/)
:::

## Make a branch

::::: {.panel-tabset}

### RStudio

:::: columns
::: {.column width="70%"}
```{r}
#| label: git-make-branch-rstudio
knitr::include_graphics("https://biostats-r.github.io/biostats/github/Pics/fork_branch_tutorial/5_make_new_branch.png")
```
:::

::: {.column width="30%"}
```{r}
#| label: git-make-branch2-rstudio
knitr::include_graphics("https://biostats-r.github.io/biostats/github/Pics/fork_branch_tutorial/6_name_branch.png")
```
:::
::::

### Command line

Copy the **SHA** of the last commit

```{bash}
#| label: git-make-branch-cl
#| echo: true
#| eval: false
#| code-line-numbers: false
git branch <BRANCH-NAME>
```

### VS Code

:::: columns
:::{.column width="10%"}
:::

:::{.column width="60%"}
```{r}
#| label: git-make-branch-VScode
knitr::include_graphics("https://code.visualstudio.com/assets/docs/sourcecontrol/intro/scm-create-branch.png")
```
:::
::::

### GH Desktop

:::: columns
:::{.column width="10%"}
:::

:::{.column width="60%"}
```{r}
#| label: git-make-branch-GH
knitr::include_graphics("https://docs.github.com/assets/cb-26427/mw-1440/images/help/desktop/new-branch-button-mac.webp")
```
:::
::::

:::::

## Switching between branches

The default branch is called [main]{.text-color-highlight-secondary} or [master]{.text-color-highlight-secondary}

! Make sure that you have all changes commited before switching !

::::: {.panel-tabset}

### RStudio

:::: columns
::: {.column width="10%"}
:::

::: {.column width="70%"}
```{r}
#| label: git-switch-branch-rstudio
knitr::include_graphics("https://aberdeenstudygroup.github.io/studyGroup/lessons/SG-T1-GitHubVersionControl/img/ChangeBranch.png")
```
:::
::::

### Command line

Copy the **SHA** of the last commit

```{bash}
#| label: git-switch-branch-cl
#| echo: true
#| eval: false
#| code-line-numbers: false
git checkout  <BRANCH-NAME>
```

### VS Code

:::: columns
:::{.column width="10%"}
:::

:::{.column width="55%"}
```{r}
#| label: git-switch-branch-VScode
knitr::include_graphics("https://geo-jobe.com/wp-content/uploads/2022/07/CheckoutOrCreateBranch-1.png")
```
:::
::::

### GH Desktop

:::: columns
:::{.column width="10%"}
:::

:::{.column width="60%"}
```{r}
#| label: git-switch-branch-GH
knitr::include_graphics("https://docs.github.com/assets/cb-38142/mw-1440/images/help/desktop/select-branch-from-dropdown.webp")
```
:::
::::

:::::

## [Exercise 7]{.r-fit-text} {.exercise .textcenter}

:::{.r-fit-text}
Make a branch, switch, commit chnages, push 
:::

`r countdown(minutes = 3)`

## Merging branches

```{r}
#| label: git-merge-branch-scheme
knitr::include_graphics("https://media.geeksforgeeks.org/wp-content/uploads/20230516192737/git-three-way-merging.png")
```

## Merging branches

```{r}
#| label: git-merge-branch-scheme2
knitr::include_graphics("https://www.yakuter.com/wp-content/yuklemeler/1_sMJbSt3sLrC-sIsPOVRBdw.png")
```

## Pull Request (PR)

Request to merge a branch

```{r}
#| label: git-pull-request-scheme
knitr::include_graphics("https://crunchify.com/wp-content/uploads/2017/09/Github-WorkFlow-Tips-Crunchify-Tips.png")
```

## Pull Request - create

After you **push** new branch, you should have a green button [Compare & pull request]{.text-color-highlight-primary}

```{r}
#| label: git-pull-request-create
knitr::include_graphics("https://aberdeenstudygroup.github.io/studyGroup/lessons/SG-T1-GitHubVersionControl/img/CreatePullReq.png")
```

::: footer
[Aberdeen Study Group](https://aberdeenstudygroup.github.io/studyGroup/lessons/SG-T1-GitHubVersionControl/VersionControl/)
:::

## Pull Request - components

```{r}
#| label: git-pull-request-componnets
knitr::include_graphics("https://www.dummies.com/wp-content/uploads/github-open-pull-request.jpg")
```

::: footer
[GitHub for dummies](https://www.dummies.com/article/technology/programming-web-design/general-programming-web-design/what-are-github-pull-requests-264741/)
:::

## Pull Request - Overview

Now you can [more commits]{.text-color-highlight-primary}, add [Comment]{.text-color-highlight-secondary} to start discussion, or [merge]{.text-color-highlight-terciary}

```{r}
#| label: git-pull-request-overview
knitr::include_graphics("https://aberdeenstudygroup.github.io/studyGroup/lessons/SG-T1-GitHubVersionControl/img/Merge.png")
```

::: footer
[Aberdeen Study Group](https://aberdeenstudygroup.github.io/studyGroup/lessons/SG-T1-GitHubVersionControl/VersionControl/)
:::

## Merging strategies

:::: columns

::: {.column width="35%"}
Merge commit
```{r}
#| label: git-merge-strategy-merge
knitr::include_graphics("https://lukemerrett.com/content/images/2021/08/906613c7-94fb-41a8-9c74-77895dec7f53.png")
```
:::

::: {.column width="35%" .fragment}
Squash & Merge
```{r}
#| label: git-merge-strategy-squash
knitr::include_graphics("https://lukemerrett.com/content/images/2021/08/fa7e8e52-7037-40f9-a1fd-3dcc916d9840.png")
```
:::

::: {.column width="30%" .fragment}
Rebase & Merge
```{r}
#| label: git-merge-strategy-rebase
knitr::include_graphics("https://lukemerrett.com/content/images/2021/08/c44e8334-f187-4386-8946-d7996f883de3.png")
```
:::

::::

::: footer
[Luke Merrett](https://lukemerrett.com/different-merge-types-in-git/)
:::

## Delete branch

We can delete branch directly on GitHub after merging

```{r}
#| label: git-pull-request-delete-branch
knitr::include_graphics("https://aberdeenstudygroup.github.io/studyGroup/lessons/SG-T1-GitHubVersionControl/img/DeleteBranch.png")
```

::: footer
[Aberdeen Study Group](https://aberdeenstudygroup.github.io/studyGroup/lessons/SG-T1-GitHubVersionControl/VersionControl/)
:::

## Delete branch

We can also delete branch **before** merging

::::: {.panel-tabset}

### RStudio

We need the **Terminal** (NOT *console*) again.

To delete a [local]{.text-color-highlight-secondary} branch

```{bash}
#| label: git-delete-branch-local-rstudio
#| echo: true
#| eval: false
#| code-line-numbers: false
git branch -d <BRANCH-NAME>
```

To delete a [remote]{.text-color-highlight-primary} branch

```{bash}
#| label: git-delete-branch-remote-rstudio
#| echo: true
#| eval: false
#| code-line-numbers: false
git push origin --delete <BRANCH-NAME>
```

### Command line

To delete a [local]{.text-color-highlight-secondary} branch

```{bash}
#| label: git-delete-branch-local-cl
#| echo: true
#| eval: false
#| code-line-numbers: false
git branch -d <BRANCH-NAME>
```

To delete a [remote]{.text-color-highlight-primary} branch

```{bash}
#| label: git-delete-branch-remote-cl
#| echo: true
#| eval: false
#| code-line-numbers: false
git push origin --delete <BRANCH-NAME>
```

### VS Code

Open [Command Palette]{.text-color-highlight-secondary} (`Ctrl+Shift+p`)

Select [Git: Delete branch ...]{.text-color-highlight-terciary}

### GH Desktop

:::: columns
:::{.column width="10%"}
:::

:::{.column width="60%"}
```{r}
#| label: git-delete-branch-GH
knitr::include_graphics("https://docs.github.com/assets/cb-28505/mw-1440/images/help/desktop/delete-branch-win.webp")
```
:::
::::

:::::

## Pull Request - review

A tool to [review]{.text-color-highlight-primary} [suggested]{.text-color-highlight-secondary} changes

```{r}
#| label: git-pull-request-scheme2
knitr::include_graphics("https://atlassianblog.wpengine.com/wp-content/uploads/bitbucket411-blog-1200x-branches2.png")
```

::: footer
[https://www.atlassian.com/](https://www.atlassian.com/blog/bitbucket/5-pull-request-must-haves)
:::

## Pull Request - review

On [someone else's PR]{.text-color-highlight-primary}, you can comment on **individual lines** or **whole files**

```{r}
#| label: git-pull-request-review
include_local_figure("5_review.png")
```

## Pull Request - review

```{r}
#| label: git-pull-request-add-commets
knitr::include_graphics("https://www.researchgate.net/profile/Yue-Yu-126/publication/321632407/figure/fig1/AS:569701769191424@1512838894719/Example-comments-on-GitHub_W640.jpg")
```

::: footer
[What Are They Talking About? Analyzing Code Reviews in Pull-Based Development Model](http://dx.doi.org/10.1007/s11390-017-1783-2)
:::

## Merge conflict with branch üí©

Merge conflict with branches is much more pleasantüòé

```{r}
#| label: git-pull-request-review2
include_local_figure("4_merge_conflict.png")
```

## Merge conflict with branch üí©

Edit the file as needed

```{r}
#| label: git-merge-conflic-gh-2
include_local_figure("5_conflict.png")
```

## Merge conflict with branch üí©

Commit the changes

```{r}
#| label: git-merge-conflic-gh-3
include_local_figure("7_solved.png")
```

## [Exercise 8]{.r-fit-text} {.exercise .textcenter}

:::{.r-fit-text}
Merge a branch
:::

`r countdown(minutes = 3)`

## Bonus for R users

```{r}
#| label: git-pr-helpers
knitr::include_graphics("https://www.garrickadenbuie.com/blog/pull-request-flow-usethis/usethis-pr-flow-medium.jpg")
```

::: footer
[Pull Request Flow with usethis](https://www.garrickadenbuie.com/blog/pull-request-flow-usethis)
:::

# [Collaboration]{.bold .r-fit-text} {.title}

[& PROJECT MANAGEMENT]{.bold .r-fit-text}

(via GitHub tools)

## Collaboration

```{r}
#| label: community-exchange
include_local_figure("community-exchange.jpg")
```

::: footer
[This image was created by Scriberia for The Turing Way community and is used under a CC-BY licence](https://zenodo.org/doi/10.5281/zenodo.3332807)
:::

## Collaboration types

```{r}
#| label: collaboration-types
include_local_figure("collaboration-types.jpg")
```

::: footer
[This image was created by Scriberia for The Turing Way community and is used under a CC-BY licence](https://zenodo.org/doi/10.5281/zenodo.3332807)
:::

## Collaboration forms

:::: columns
:::{.column width="60%"}
```{r}
#| label: ResearchTools
include_local_figure("ResearchTools.jpg")
```
:::

::: {.column width="40%"}
```{r}
#| label: CommunityNetwork
include_local_figure("CommunityNetwork.jpg")
```
:::
::::

::: footer
[This image was created by Scriberia for The Turing Way community and is used under a CC-BY licence](https://zenodo.org/doi/10.5281/zenodo.3332807)
:::

## Collaborate on a project

```{r}
#| label: ProjectDesign
include_local_figure("ProjectDesign.jpg")
```

::: footer
[This image was created by Scriberia for The Turing Way community and is used under a CC-BY licence](https://zenodo.org/doi/10.5281/zenodo.3332807)
:::

## Project Management

<br>
<br>

:::: columns

::: {.column width="20%"}
:::

::: {.column width="60%"}
[wiki](https://en.wikipedia.org/wiki/Project_management):

::: {.blockquote}
*[Project management]{.text-color-highlight-primary} is the process of leading work of a team ‚Ä¶ to achieve all project [goals]{.text-color-highlight-secondary} within the given [constraints]{.text-color-highlight-terciary}*.
:::
:::

::: {.column width="20%"}
:::

::::

## GitHub tools suite

```{r}
#| label: GH-project-tools
knitr::include_graphics("https://github.blog/wp-content/uploads/2022/02/GitHub-Issues-project-planning_banner.png")
```

::: footer
[Getting started with project planning on GitHub](https://github.blog/developer-skills/github/getting-started-with-project-planning-on-github/)
:::


## Dissemintation

- Releases
- How they connect to ZENODO

# [Literate programming]{.bold .r-fit-text} {.title}

# [Functional programming]{.bold .r-fit-text} {.title}

# [Outro]{.bold .r-fit-text} {.title}

## About me

